#!/usr/bin/env node

const path = require('path');
const { fetchDarwiniaTokenSnapshot } = require('../src/darwinia/fetch-token');

async function main() {
	const contractAddress = process.argv[2];
	if (!contractAddress) {
		console.error("❌ Error: Please provide contract address as parameter");
		console.log("Usage: fetch-token-darwinia <contract_address>");
		process.exit(1);
	}

	const outputDir = path.join(__dirname, '..', 'data');

	try {
		await fetchDarwiniaTokenSnapshot(contractAddress, outputDir);
	} catch (error) {
		console.error("❌ Fatal error:", error.message);
		process.exit(1);
	}
}

main();
